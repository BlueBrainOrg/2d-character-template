[gd_scene load_steps=13 format=3 uid="uid://03snnob5uow1"]

[ext_resource type="SpriteFrames" uid="uid://c3ixhnu256fxs" path="res://character_controller/sprite_frames.tres" id="1_o8lfe"]
[ext_resource type="Script" uid="uid://bgyus5ghfgqd0" path="res://character_controller/2d_character_controller.gd" id="1_qr5f8"]
[ext_resource type="Script" uid="uid://cihci01qsk7vc" path="res://character_controller/animated_sprite_2d_tool.gd" id="2_7v80m"]
[ext_resource type="Script" uid="uid://b4u3gi8hgjlet" path="res://character_controller/state_machine/state_machine.gd" id="4_t600w"]
[ext_resource type="Script" uid="uid://dl7ctbe0cv3c2" path="res://character_controller/input_map.gd" id="4_uc8sf"]
[ext_resource type="Script" uid="uid://duwoy3nkmvy38" path="res://character_controller/movement_variables.gd" id="5_gtgy5"]
[ext_resource type="Script" uid="uid://cwdjqvddxjqqg" path="res://character_controller/state_machine/states/grounded.gd" id="5_t600w"]
[ext_resource type="Script" uid="uid://dadlfrrf4y021" path="res://character_controller/state_machine/states/one_shot.gd" id="6_c7ixp"]
[ext_resource type="Script" uid="uid://cs6bis811k88n" path="res://character_controller/jump_air.gd" id="7_c7ixp"]
[ext_resource type="Script" uid="uid://bnbe7mxk8wsky" path="res://character_controller/state_machine/states/airborne.gd" id="7_qq781"]
[ext_resource type="Script" uid="uid://ke7ebekdcqfn" path="res://character_controller/state_machine/dynamic_transition.gd" id="8_clehh"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_qq781"]
size = Vector2(10, 29)

[node name="CharacterBody2D" type="CharacterBody2D"]
script = ExtResource("1_qr5f8")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
sprite_frames = ExtResource("1_o8lfe")
animation = &"punch_jab"
autoplay = "idle"
script = ExtResource("2_7v80m")
fps = 12.0

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, 1.5)
shape = SubResource("RectangleShape2D_qq781")

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(0, -74)
zoom = Vector2(2, 2)
position_smoothing_enabled = true

[node name="InputMap" type="Node" parent="."]
script = ExtResource("4_uc8sf")

[node name="MovementVariables" type="Node" parent="."]
script = ExtResource("5_gtgy5")
fall_speed = 150.0
time_to_fall_speed = 0.1
jump_height = 70.0
jump_x_modifier = 1.15

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("default_state")]
script = ExtResource("4_t600w")
default_state = NodePath("Grounded")
is_root = true

[node name="Grounded" type="Node" parent="StateMachine" node_paths=PackedStringArray("input_map", "variables", "jump_state", "fall_state", "animated_sprite")]
script = ExtResource("5_t600w")
input_map = NodePath("../../InputMap")
variables = NodePath("../../MovementVariables")
jump_state = NodePath("../JumpSquat")
fall_state = NodePath("../Airborne")
animated_sprite = NodePath("../../AnimatedSprite2D")
walk_speed_animation_magic_number = 90.0
run_speed_animation_magic_number = 150.0

[node name="ToAttack" type="Node" parent="StateMachine/Grounded" node_paths=PackedStringArray("to_state")]
script = ExtResource("8_clehh")
to_state = NodePath("../../Attack")
input = "attack"

[node name="JumpSquat" type="Node" parent="StateMachine" node_paths=PackedStringArray("to_state", "animated_sprite")]
script = ExtResource("6_c7ixp")
to_state = NodePath("../JumpAir")
animated_sprite = NodePath("../../AnimatedSprite2D")
animation_name = "land"
time_shortcut = true
time = 0.05
metadata/_custom_type_script = "uid://b3fwraueavvlt"

[node name="JumpAir" type="Node" parent="StateMachine" node_paths=PackedStringArray("input_map", "variables", "landing_state", "airborne_state", "animated_sprite")]
script = ExtResource("7_c7ixp")
input_map = NodePath("../../InputMap")
variables = NodePath("../../MovementVariables")
landing_state = NodePath("../Grounded")
airborne_state = NodePath("../Airborne")
animated_sprite = NodePath("../../AnimatedSprite2D")
metadata/_custom_type_script = "uid://b3fwraueavvlt"

[node name="Airborne" type="Node" parent="StateMachine" node_paths=PackedStringArray("input_map", "variables", "landing_state", "animated_sprite")]
script = ExtResource("7_qq781")
input_map = NodePath("../../InputMap")
variables = NodePath("../../MovementVariables")
landing_state = NodePath("../Grounded")
animated_sprite = NodePath("../../AnimatedSprite2D")
metadata/_custom_type_script = "uid://b3fwraueavvlt"

[node name="Attack" type="Node" parent="StateMachine" node_paths=PackedStringArray("to_state", "animated_sprite")]
script = ExtResource("6_c7ixp")
to_state = NodePath("../Grounded")
animated_sprite = NodePath("../../AnimatedSprite2D")
animation_name = "punch_jab"
override_x_movement = true
metadata/_custom_type_script = "uid://dadlfrrf4y021"
